<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:budget="clr-namespace:BudgetAnalyser.Budget"
                    xmlns:converters="clr-namespace:BudgetAnalyser.Converters"
                    xmlns:statement="clr-namespace:BudgetAnalyser.Engine.Statement;assembly=BudgetAnalyser.Engine"
                    xmlns:statement1="clr-namespace:BudgetAnalyser.Statement">

    <converters:BudgetBucketToStringConverter x:Key="BudgetBucketToStringConverter" />

    <DataTemplate x:Key="TransactionTemplate1"
                  DataType="{x:Type statement:Transaction}">
        <Border x:Name="MainBorder"
                Margin="0,1,2,1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition SharedSizeGroup="A"
                                      Width="Auto" />
                    <ColumnDefinition SharedSizeGroup="B"
                                      Width="Auto" />
                    <ColumnDefinition SharedSizeGroup="C"
                                      Width="Auto" />
                    <ColumnDefinition SharedSizeGroup="D"
                                      Width="Auto" />
                    <ColumnDefinition SharedSizeGroup="E"
                                      Width="Auto" />
                    <ColumnDefinition SharedSizeGroup="F"
                                      Width="Auto" />
                    <ColumnDefinition SharedSizeGroup="G"
                                      Width="Auto" />
                    <ColumnDefinition SharedSizeGroup="H"
                                      Width="Auto" />
                    <ColumnDefinition SharedSizeGroup="I"
                                      Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock Style="{StaticResource TransactionTextBlockStyle}"
                           Text="{Binding Date, StringFormat=\{0:d\}}"
                           ToolTip="{Binding Date, StringFormat=\{0:D\}}" />
                <TextBlock Grid.Column="1"
                           Style="{StaticResource TransactionTextBlockNumber}"
                           Text="{Binding Amount, StringFormat=\{0:N\}}" />
                <TextBlock Grid.Column="2"
                           Style="{StaticResource TransactionTextBlockStyle}"
                           Text="{Binding Description}"
                           ToolTip="{Binding Description}" />
                <TextBlock Grid.Column="3"
                           Style="{StaticResource TransactionTextBlockStyle}"
                           MinWidth="120"
                           Text="{Binding BudgetBucket, Converter={StaticResource BudgetBucketToStringConverter}}"
                           ToolTip="{Binding BudgetBucket}" />
                <TextBlock Grid.Column="4"
                           Style="{StaticResource TransactionTextBlockStyle}"
                           Text="{Binding Reference1}"
                           ToolTip="{Binding Reference1}" />
                <TextBlock Grid.Column="5"
                           Style="{StaticResource TransactionTextBlockStyle}"
                           Text="{Binding Reference2}"
                           ToolTip="{Binding Reference2}" />
                <TextBlock Grid.Column="6"
                           Style="{StaticResource TransactionTextBlockStyle}"
                           Text="{Binding Reference3}"
                           ToolTip="{Binding Reference3}" />
                <TextBlock Grid.Column="7"
                           Style="{StaticResource TransactionTextBlockStyle}"
                           Text="{Binding TransactionType}"
                           ToolTip="{Binding TransactionType}" />
                <Image Grid.Column="8"
                       Height="20"
                       HorizontalAlignment="Left"
                       Margin="6,2,6,2"
                       Source="{Binding AccountType.ImagePath}"
                       Stretch="Uniform"
                       ToolTip="{Binding AccountType.Name}"
                       VerticalAlignment="Top"
                       Width="62" />
            </Grid>
        </Border>
        <DataTemplate.Triggers>
            <DataTrigger Value="True">
                <DataTrigger.Binding>
                    <Binding Path="IsSuspectedDuplicate" />
                </DataTrigger.Binding>
                <DataTrigger.Setters>
                    <Setter Property="Background"
                            TargetName="MainBorder"
                            Value="{StaticResource ImportantHighlightLightBrush}" />
                </DataTrigger.Setters>
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>


    <DataTemplate DataType="{x:Type statement1:EditingTransactionViewModel}">
        <Border x:Name="MainBorder"
                Margin="0,1,2,1"
                BorderThickness="1"
                BorderBrush="{StaticResource TextBrush}"
                Padding="10"
                DataContext="{Binding Transaction}">
            <Grid FocusManager.FocusedElement="{Binding ElementName=BucketCodeComboBox}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="35" />
                    <RowDefinition Height="35" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="Date"
                           Margin="5,2,5,2"
                           Grid.Column="0" />
                <TextBlock Text="Amount"
                           Margin="5,2,5,2"
                           Grid.Column="1" />
                <TextBlock Text="Description"
                           Margin="5,2,5,2"
                           Grid.Column="2" />
                <TextBlock Text="Budget Bucket"
                           Margin="5,2,5,2"
                           Grid.Column="3" />
                <TextBlock Text="Reference 1"
                           Margin="5,2,5,2"
                           Grid.Column="4" />
                <TextBlock Text="Reference 2"
                           Margin="5,2,5,2"
                           Grid.Column="5" />
                <TextBlock Text="Reference 3"
                           Margin="5,2,5,2"
                           Grid.Column="6" />
                <TextBlock Text="Transaction Type"
                           Margin="5,2,5,2"
                           Grid.Column="7" />
                <TextBlock Text="Account"
                           Margin="5,2,5,2"
                           Grid.Column="8" />
                
                <DatePicker CalendarStyle="{StaticResource CalendarStyle}"
                            Grid.Row="1"
                            HorizontalAlignment="Left"
                            SelectedDate="{Binding Date, UpdateSourceTrigger=PropertyChanged}"
                            VerticalAlignment="Top"
                            Width="34"
                            TabIndex="2" />
                <TextBlock Grid.Column="1"
                           Grid.Row="1"
                           Style="{StaticResource TransactionTextBlockNumber}"
                           Text="{Binding Amount, StringFormat=\{0:N\}}" />
                <TextBox Grid.Column="2"
                         HorizontalAlignment="Left"
                         Grid.Row="1"
                         Text="{Binding Description, UpdateSourceTrigger=PropertyChanged}"
                         ToolTip="{Binding Description}"
                         TabIndex="3"
                         VerticalAlignment="Top" />
                <ComboBox x:Name="BucketCodeComboBox"
                          Grid.Row="1"
                          DisplayMemberPath="Code"
                          Grid.Column="3"
                          HorizontalAlignment="Left"
                          ItemContainerStyle="{StaticResource BudgetBucketComboItemStyle}"
                          ItemsSource="{Binding Source={x:Static budget:BudgetBucketBindingSource.BucketRepository}, Path=Buckets}"
                          MinWidth="120"
                          SelectedItem="{Binding BudgetBucket, UpdateSourceTrigger=PropertyChanged}"
                          TabIndex="1"
                          ToolTip="{Binding BudgetBucket}"
                          VerticalAlignment="Top" />
                <TextBox Grid.Column="4"
                         HorizontalAlignment="Left"
                         Grid.Row="1"
                         Text="{Binding Reference1, UpdateSourceTrigger=PropertyChanged}"
                         ToolTip="{Binding Reference1}"
                         TabIndex="4"
                         VerticalAlignment="Top" />
                <TextBox Grid.Column="5"
                         Grid.Row="1"
                         HorizontalAlignment="Left"
                         Text="{Binding Reference2, UpdateSourceTrigger=PropertyChanged}"
                         ToolTip="{Binding Reference2}"
                         TabIndex="5"
                         VerticalAlignment="Top" />
                <TextBox Grid.Column="6"
                         HorizontalAlignment="Left"
                         Text="{Binding Reference3, UpdateSourceTrigger=PropertyChanged}"
                         ToolTip="{Binding Reference3}"
                         Grid.Row="1"
                         TabIndex="6"
                         VerticalAlignment="Top" />
                <TextBlock Grid.Column="7"
                           Grid.Row="1"
                           Style="{StaticResource TransactionTextBlockStyle}"
                           Text="{Binding TransactionType}"
                           ToolTip="{Binding TransactionType}" />
                <Image Grid.Column="8"
                       Height="20"
                       Grid.Row="1"
                       HorizontalAlignment="Left"
                       Margin="4"
                       Source="{Binding AccountType.ImagePath}"
                       Stretch="Uniform"
                       ToolTip="{Binding AccountType.Name}"
                       VerticalAlignment="Top"
                       Width="62" />
            </Grid>
        </Border>
    </DataTemplate>


    <Style x:Key="TransactionListBoxContainer"
           TargetType="ListBoxItem">
        <Setter Property="SnapsToDevicePixels"
                Value="true" />
        <Setter Property="ContentTemplate"
                Value="{StaticResource TransactionTemplate1}" />
        <Setter Property="Template">
            <Setter.Value>

                <ControlTemplate TargetType="ListBoxItem">
                    <Border x:Name="Border"
                            Margin="0,2,2,2"
                            SnapsToDevicePixels="true">
                        <ContentPresenter />
                    </Border>
                    <ControlTemplate.Triggers>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver"
                                           Value="True" />
                                <Condition Property="IsSelected"
                                           Value="False" />
                            </MultiTrigger.Conditions>
                            <MultiTrigger.Setters>
                                <Setter Property="Background"
                                        TargetName="Border"
                                        Value="{StaticResource ControlMouseOverBrush}" />
                            </MultiTrigger.Setters>
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver"
                                           Value="False" />
                                <Condition Property="IsSelected"
                                           Value="True" />
                            </MultiTrigger.Conditions>
                            <MultiTrigger.Setters>
                                <Setter Property="Background"
                                        TargetName="Border"
                                        Value="{StaticResource SelectedItemRowBrush}" />
                            </MultiTrigger.Setters>
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver"
                                           Value="True" />
                                <Condition Property="IsSelected"
                                           Value="True" />
                            </MultiTrigger.Conditions>
                            <MultiTrigger.Setters>
                                <Setter Property="Background"
                                        TargetName="Border"
                                        Value="{StaticResource SelectedItemRowBrush}" />
                            </MultiTrigger.Setters>
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver"
                                           Value="False" />
                                <Condition Property="IsSelected"
                                           Value="False" />
                                <Condition Property="ItemsControl.AlternationIndex"
                                           Value="0" />
                            </MultiTrigger.Conditions>
                            <MultiTrigger.Setters>
                                <Setter Property="Background"
                                        TargetName="Border"
                                        Value="{StaticResource TileBackgroundBrush}" />
                            </MultiTrigger.Setters>
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver"
                                           Value="False" />
                                <Condition Property="IsSelected"
                                           Value="False" />
                                <Condition Property="ItemsControl.AlternationIndex"
                                           Value="1" />
                            </MultiTrigger.Conditions>
                            <MultiTrigger.Setters>
                                <Setter Property="Background"
                                        TargetName="Border"
                                        Value="{StaticResource TileBackgroundAlternateBrush}" />
                            </MultiTrigger.Setters>
                        </MultiTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="Tag"
                     Value="True">
                <Setter Property="ContentTemplate"
                        Value="{StaticResource TransactionEditTemplate1}" />
            </Trigger>
        </Style.Triggers>
    </Style>

</ResourceDictionary>